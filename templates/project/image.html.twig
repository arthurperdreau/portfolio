{% extends 'base.html.twig' %}
{% block title %}Images{% endblock %}

{% block body %}
    <div class="min-h-screen bg-gray-100 p-6 text-gray-800">

        <!-- Galerie d'images -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-10">
            {% for image in project.images %}
                <div class="bg-white p-2 rounded shadow relative">
                    <!-- Bouton de suppression -->
                    <a href="{{ path('remove_image', {id: image.id}) }}"
                       class="absolute top-2 right-2 text-red-500 text-sm">
                        ✕
                    </a>

                    <!-- Image -->
                    <img src="{{ vich_uploader_asset(image, 'imageFile') }}"
                         alt="Image"
                         class="w-full h-40 object-cover rounded">
                </div>
            {% else %}
                <p class="text-center col-span-full text-gray-500">Aucune image pour ce projet.</p>
            {% endfor %}
        </div>

        <!-- Formulaire d'ajout -->
        <div class="bg-white p-6 rounded shadow max-w-md mx-auto">
            <h2 class="text-xl font-bold mb-4 text-center">Ajouter une image</h2>

            {{ form_start(form) }}
            <div class="mb-4">
                {{ form_row(form.imageFile, {
                    'attr': {'class': 'w-full border px-3 py-2 rounded'}
                }) }}
            </div>

            <div class="text-center">
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">
                    Ajouter
                </button>
            </div>
            {{ form_end(form) }}

            <div class="text-center mt-4">
                <a href="{{ path('app_home') }}" class="text-blue-600 underline">Retour à l'accueil</a>
            </div>
        </div>

    </div>
{% endblock %}
